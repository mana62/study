# PHP トレイト（Trait）
- **複数のクラスで共通のメソッドを再利用するための仕組み**
- PHPは「単一継承」しかできないため、**共通機能を柔軟に使い回すためにトレイトが登場**
- `trait` キーワードを使って定義し、クラス内で `use` して取り込む

---

## 基本構文

```php
// トレイトの定義
trait LoggerTrait {
    public function log($message) {
        echo "[LOG] {$message}" . PHP_EOL;
    }
}

// クラスでトレイトを使う
class User {
    use LoggerTrait;

    public function create() {
        $this->log("ユーザー作成しました！");
    }
}
```

---

## トレイトの特徴

| 特徴               | 説明                                           |
|--------------------|------------------------------------------------|
| `trait` で定義     | クラスとは別に、再利用用のメソッドをまとめる   |
| `use` で取り込む   | クラスにトレイトの機能を注入できる             |
| 継承とは違う       | 親クラスが1つでも、トレイトは複数使える        |
| プロパティも定義可能 | ただし、衝突に注意が必要                       |


---

## 注意点
- 同じメソッド名のトレイトを複数使うと衝突する
- 衝突を避けるには `insteadof` や `as` を使って調整する

```bash
trait A {
    public function hello() {
        echo "A";
    }
}

trait B {
    public function hello() {
        echo "B";
    }
}

class Sample {
    use A, B {
        B::hello insteadof A;
        A::hello as helloFromA;
    }
}
```

---

## 使いどころ
| シーン            | トレイト例                 | 説明                     |
| -------------- | --------------------- | ---------------------- |
| ログ機能を全モデルで使いたい | `LoggerTrait`         | Eloquentモデルなど複数で共通利用   |
| 更新日時の自動記録      | `TimestampTrait`      | create/update時に共通処理を追加 |
| バリデーション共通化     | `ValidatesInputTrait` | 各サービスクラスで使いまわし         |
| APIレスポンス整形     | `ApiResponseTrait`    | コントローラ共通のレスポンス処理に      |


---

## まとめ
- トレイトは「クラス横断的な共通処理」をまとめる部品
- 複数クラスで同じ機能を共有したいときに便利
- 継承関係に依存しない柔軟な再利用方法
- 衝突時は insteadof / as で解決できる
- 実務では Mixinパターン として頻出