### PHP関数

---

## 文字列操作

| 関数・メソッド       | 機能説明                       | 第一引数         | 第二引数/オプション             | 使用例                                    |
| -------------------- | ------------------------------ | ---------------- | ------------------------------- | ----------------------------------------- |
| `echo()`             | 画面に文字列を出力             | 出力したい文字列 | -                               | `echo "こんにちは";`                      |
| `print_r()`          | 配列などの中身を簡易表示       | 変数             | true/false (返り値を取得するか) | `print_r($array);`                        |
| `var_dump()`         | デバッグ用に型と値を表示       | 変数             | -                               | `var_dump($array);`                       |
| `strip_tags()`       | HTMLタグを除去                 | 文字列           | 許可するタグ                    | `strip_tags('<p>Hello</p>') // Hello`     |
| `htmlspecialchars()` | HTML特殊文字をエスケープ       | 文字列           | 定数                            | `htmlspecialchars('<a>')`                 |
| `strrev()`           | 文字列を逆順に                 | 文字列           | -                               | `strrev("abc") // "cba"`                  |
| `strtolower()`       | 英字を小文字に変換             | 文字列           | -                               | `strtolower("HELLO") // "hello"`          |
| `strtoupper()`       | 英字を大文字に変換             | 文字列           | -                               | `strtoupper("hello") // "HELLO"`          |
| `str_replace()`      | 文字列の一部を置換             | 検索文字列       | 置換文字列                      | `str_replace(" ", "-", $str)`             |
| `substr()`           | 文字列の一部を取得             | 文字列           | 開始位置, 長さ                  | `substr("Hello", 0, 3) // "Hel"`          |
| `substr_count()`     | 部分文字列の出現回数を取得     | 文字列           | 検索文字列                      | `substr_count("abcabc", "a") // 2`        |
| `str_split()`        | 文字列を1文字ずつ分割          | 文字列           | -                               | `str_split("abc") // ['a','b','c']`       |
| `mb_strlen()`        | マルチバイト文字列の長さ       | 文字列           | 文字コード                      | `mb_strlen("こんにちは") // 5`            |
| `mb_substr()`        | マルチバイト文字列の一部を取得 | 文字列           | 開始位置, 長さ                  | `mb_substr("こんにちは", 0, 2) // "こん"` |
| `ucwords()`          | 各単語の先頭を大文字に         | 文字列           | -                               | `ucwords("hello world") // Hello World`   |
| `strpos()`           | 文字列内の位置を取得           | 文字列           | 検索文字列                      | `strpos("Hello World", "World") // 6`     |
| `strlen()`           | 文字列の長さを取得             | 文字列           | -                               | `strlen("OpenAI") // 6`                   |

---

## 配列操作

| 関数名                   | 説明                         | 第一引数 | 第二引数/オプション | 使用例                                       |
| ------------------------ | ---------------------------- | -------- | ------------------- | -------------------------------------------- |
| `array_push()`           | 配列末尾に値を追加           | 配列     | 値                  | `array_push($arr, "A");`                     |
| `array_merge()`          | 配列を結合                   | 配列1    | 配列2               | `array_merge([1], [2]) // [1,2]`             |
| `array_sum()`            | 配列内の合計                 | 配列     | -                   | `array_sum([1,2,3]) // 6`                    |
| `array_unique()`         | 重複を除去                   | 配列     | -                   | `array_unique([1,1,2]) // [1,2]`             |
| `array_keys()`           | キー一覧を取得               | 配列     | -                   | `array_keys(['a'=>1]) // ['a']`              |
| `array_values()`         | 値一覧を取得                 | 配列     | -                   | `array_values(['a'=>1]) // [1]`              |
| `array_rand()`           | ランダムなキーを取得         | 配列     | -                   | `array_rand(['a','b','c'])`                  |
| `in_array()`             | 値が含まれているか確認       | 値       | 配列                | `in_array(2, [1,2,3]) // true`               |
| `array_map()`            | 各要素に関数を適用           | 関数     | 配列                | `array_map('strtoupper', ['a','b'])`         |
| `array_reduce()`         | 配列を1つの値に集約          | 配列     | 関数, 初期値        | `array_reduce([1,2,3], fn($a,$b)=>$a+$b)`    |
| `array_key_exists()`     | 指定キーが存在するか確認     | キー     | 配列                | `array_key_exists('a', ['a'=>1])`            |
| `array_walk_recursive()` | 多次元配列に再帰処理         | 配列     | 関数                | `array_walk_recursive($arr, fn...)`          |
| `usort()`                | ユーザー定義で配列を並び替え | 配列     | 比較関数            | `usort($arr, fn($a,$b)=>$a-$b);`             |
| `sort()`                 | 昇順に並び替え（破壊的）     | 配列     | -                   | `sort($arr);`                                |
| `count()`                | 配列の要素数を取得           | 配列     | -                   | `count([1,2,3]) // 3`                        |
| `array_count_values()`   | 各要素の出現回数を取得       | 配列     | -                   | `array_count_values([1,2,1]) // [1=>2,2=>1]` |

---

## JSON 操作

| 関数名          | 説明                            | 第一引数          | 第二引数/オプション                | 使用例                                     |
| --------------- | ------------------------------- | ----------------- | ---------------------------------- | ------------------------------------------ |
| `json_encode()` | 配列/オブジェクトをJSON文字列化 | 配列/オブジェクト | オプション (例: JSON_PRETTY_PRINT) | `json_encode(['a'=>1]) // '{"a":1}'`       |
| `json_decode()` | JSON文字列を配列/オブジェクト化 | JSON文字列        | true/false (配列で返すか)          | `json_decode('{"a":1}', true) // ['a'=>1]` |

---

## 日付・時間

| 関数名        | 説明                         | 第一引数              | 第二引数/オプション   | 使用例                          |
| ------------- | ---------------------------- | --------------------- | --------------------- | ------------------------------- |
| `date()`      | 指定フォーマットで日付を取得 | フォーマット          | -                     | `date("Y-m-d") // "2025-08-29"` |
| `strtotime()` | 文字列からタイムスタンプ取得 | 文字列                | -                     | `strtotime("next Monday")`      |
| `DateTime`    | 日付操作用クラス             | 日付文字列            | -                     | `new DateTime("2025-01-01")`    |
| `diff`        | DateTime同士の差分を取得     | DateTimeオブジェクトA | DateTimeオブジェクトB | `$a->diff($b)`                  |

---

## ファイル操作

| 関数名                | 説明                 | 第一引数   | 第二引数/オプション                  | 使用例                                                 |
| --------------------- | -------------------- | ---------- | ------------------------------------ | ------------------------------------------------------ |
| `file_put_contents()` | ファイルに書き込み   | ファイル名 | データ, オプション (例: FILE_APPEND) | `file_put_contents("test.txt", "Hello", FILE_APPEND);` |
| `file_get_contents()` | ファイルの内容を取得 | ファイル名 | -                                    | `file_get_contents("test.txt");`                       |

---

## 変数・型・例外

| 関数名                  | 説明                       | 第一引数   | 第二引数/オプション | 使用例                           |
| ----------------------- | -------------------------- | ---------- | ------------------- | -------------------------------- |
| `isset()`               | 変数が定義されているか確認 | 変数       | -                   | `isset($name);`                  |
| `empty()`               | 変数が空か確認             | 変数       | -                   | `empty("") // true`              |
| `is_null()`             | nullかどうか確認           | 変数       | -                   | `is_null(null) // true`          |
| `ctype_digit()`         | 数字かどうか確認           | 文字列     | -                   | `ctype_digit("123") // true`     |
| `throw new Exception()` | 例外を投げる               | メッセージ | -                   | `throw new Exception("エラー");` |

---

## HTTP・正規表現・その他

| 関数名                    | 説明                               | 第一引数     | 第二引数/オプション    | 使用例                                          |
| ------------------------- | ---------------------------------- | ------------ | ---------------------- | ----------------------------------------------- |
| `preg_match()`            | 正規表現で文字列内の一致を判定する | パターン     | 対象文字列             | `preg_match('/パターン/', 対象文字列);`         |
| `preg_replace()`          | 正規表現で文字列を置換する         | 検索パターン | 置換文字列, 対象文字列 | `preg_replace('/検索/', '置換後', 対象文字列);` |
| `stream_context_create()` | HTTPリクエスト用コンテキスト作成   | 配列         | -                      | `stream_context_create(配列);`                  |
| `explode()`               | 文字列を区切って配列に変換         | 区切り文字   | 文字列                 | `explode(",", "a,b,c") // ['a','b','c']`        |
| `implode()`               | 配列を文字列に結合                 | 区切り文字   | 配列                   | `implode("-", ['a','b','c']) // "a-b-c"`        |


ucfirst(): PHPの文字列関数 (文字列の最初の文字を大文字に変換する)
unserialize :
    - 引数：シリアライズされた文字列（serialize() で作られたやつ）
    - 戻り値：元の配列・オブジェクトなど
json_last_error : 直前に実行した json_encode() や json_decode() のエラーコードを返す

JSON_ERROR_NONE : 値は 0 「エラーがない」という意味
Throwable : 「Exception」も「Error」も全部まとめてキャッチできる. (エラーをキャッチできるもの)
chunk : 一度に処理するデータの件数を制限するためのもの



# PHP mbstring 文字コード系関数一覧

| メソッド名               | 意味・目的                                           | 第1引数           | 第2引数           | 使い方例                                                                 | 備考                                       |
|--------------------------|------------------------------------------------------|-------------------|-------------------|------------------------------------------------------------------------|--------------------------------------------|
| `mb_detect_encoding`     | 文字列のエンコーディングを推測                      | 対象文字列        | エンコーディング候補配列（任意） | `mb_detect_encoding($str, ['UTF-8', 'SJIS'])`                          | 推測なので100%正確ではない                 |
| `mb_convert_encoding`    | 文字列のエンコーディングを変換                      | 対象文字列        | 変換後のエンコーディング | `mb_convert_encoding($str, 'UTF-8', 'SJIS')`                          | from-toの順番に注意                         |
| `mb_convert_variables`   | 複数変数の文字コードを一括変換                      | 変換後のエンコーディング | 変換前のエンコーディング | `mb_convert_variables('UTF-8', 'SJIS', $var1, $var2)`                 | 配列や複数変数に使える                      |
| `mb_check_encoding`      | 文字列が指定エンコーディングで有効かを確認          | 対象文字列        | エンコーディング（任意） | `mb_check_encoding($str, 'UTF-8')`                                    | バリデーション用途に便利                   |
| `mb_detect_order`        | エンコーディング検出順序の取得・設定                | 検出順配列（任意）| なし               | `mb_detect_order(['UTF-8', 'SJIS'])`                                  | `mb_detect_encoding`の精度に影響            |
| `mb_encoding_aliases`    | エンコーディングの別名一覧を取得                    | エンコーディング名 | なし               | `mb_encoding_aliases('UTF-8')`                                        | UTF-8の別名一覧など                        |
| `mb_convert_kana`        | カナ文字の全角・半角変換                            | 対象文字列        | オプション指定     | `mb_convert_kana($str, 'KV')`                                         | `'KV'`などで変換内容を指定                  |
| `mb_encode_mimeheader`   | MIMEヘッダ用に文字列をエンコード                    | 対象文字列        | エンコーディング（任意） | `mb_encode_mimeheader($str, 'UTF-8')`                                 | メール送信時などに便利                     |
| `mb_decode_mimeheader`   | MIMEヘッダの文字列をデコード                        | 対象文字列        | なし               | `mb_decode_mimeheader($str)`                                          | エンコードされたヘッダを元に戻す            |
| `mb_encode_numericentity`| 文字列をHTML数値エンティティに変換                 | 対象文字列        | 変換設定配列       | `mb_encode_numericentity($str, $convmap)`                             | HTMLエンティティ化                          |
| `mb_decode_numericentity`| HTML数値エンティティを文字列に変換                 | 対象文字列        | 変換設定配列       | `mb_decode_numericentity($str, $convmap)`                             | `mb_encode_numericentity`の逆               |





substr(文字列, 開始位置, 長さ)