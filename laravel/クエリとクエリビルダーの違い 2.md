# クエリとクエリビルダーの違い
⚫︎クエリ = 実際にデータベースに送られる SQL 文
⚫︎クエリビルダー = その SQL を**PHPで組み立てるための仕組み**

## 例
**クエリ（SQL）＝完成した料理**
```php
SELECT * FROM users WHERE id = 1;
```

**クエリビルダー＝料理を作るための調理器具**
```php
DB::table('users')->where('id', 1)->get();
```

## クエリ（SQL）
- データベースが理解する言語
- 直接 SQL を書く必要がある
- DB に依存しやすい（MySQL と PostgreSQL で文法が違う）

```php
DB::select('SELECT * FROM users WHERE id = ?', [1]);
```

## クエリビルダー（Query Builder）
- Laravel が提供する「SQL を組み立てるための API」
- メソッドチェーンで書ける
- DB の種類が変わっても動きやすい（抽象化されている）
- バリデーションやエスケープが自動で安全

```php
DB::table('users')
    ->where('id', 1)
    ->get();
```

| 種類            | 説明                               | 例                               |
|-----------------|------------------------------------|----------------------------------|
| クエリ（SQL）   | データベースに送られる生の SQL 文  | SELECT * FROM users;             |
| クエリビルダー  | PHP のメソッドチェーンで SQL を組み立てる | DB::table('users')->get(); |


## クエリ・クエリビルダー・Eloquent 違い

```bash
SQL（クエリ）
↑
クエリビルダー（SQL を組み立てる）
↑
Eloquent（クエリビルダーをさらに便利にしたもの）
```


### ① 生 SQL（クエリ）
```php
DB::select('SELECT * FROM users WHERE id = 1');
```

### ② クエリビルダー
```php
DB::table('users')->where('id', 1)->get();
```

### ③ Eloquent
```php
User::where('id', 1)->get();
```

| 種類            | 役割                               | Laravelでの書き方                 |
|-----------------|------------------------------------|-----------------------------------|
| クエリ（SQL）   | DB に送る生の SQL                  | DB::select('SELECT ...')          |
| クエリビルダー  | SQL を PHP で組み立てる            | DB::table()->where()->get()       |
| Eloquent        | モデルを使って DB を扱う ORM       | User::where()->get()              |

## 「クエリ」という言葉は2種類ある
| 種類                 | 意味                     | 例                 |
|----------------------|--------------------------|--------------------|
| HTTP クエリ（URL クエリ） | URL のパラメータ          | ?keyword=apple     |
| SQL クエリ           | DB に送る命令文          | SELECT * FROM ...  |


## まとめ
| 用語                     | 意味                     | Laravelでの例                     |
|--------------------------|--------------------------|-----------------------------------|
| URL クエリ（検索ワード） | リクエストパラメータ     | $request->query('keyword')        |
| SQL クエリ               | DB に送る SQL 文         | DB::select('SELECT ...')          |
| クエリビルダー           | SQL を組み立てる仕組み   | DB::table()->where()->get()       |
| Eloquent                 | モデルを使う ORM         | User::where()->get()              |
