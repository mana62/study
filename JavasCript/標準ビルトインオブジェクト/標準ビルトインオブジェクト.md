# 標準ビルトインオブジェクト
＝JavaScript に**最初から標準で用意されているオブジェクト**のこと

## 覚え方
- データの入れ物系 → リテラルを使う（[], {}）
- 状態や振る舞いを持つもの → new（Date / Map / Promise）
- プリミティブのラッパー → new しない
- Math / JSON → static 専用

## 🔹 new を使うのが普通なもの
＝下記は、コンストラクタとして使う前提
```js
new Date()
new Map()
new Set()
new WeakMap()
new WeakSet()
new Error("oops")
new Promise((resolve) => {})
new RegExp("ab+c")
```
👉 new なしだと意味が変わったり、エラーになる
**①newを書くのはコンストラクタ関数（オブジェクト）を作成するため**
**②オブジェクトにすることで、プロトタイプを見に行くことができて、メソッドやプロパティが使えるようになる**


## 🔹 new を使わないのが一般的なもの
＝リテラル構文や関数呼び出しが用意されてる
```js
[]          // new Array() の代わり
{}          // new Object() の代わり
""          // new String() じゃなくプリミティブ
123         // new Number() じゃなくプリミティブ
true        // new Boolean() じゃなくプリミティブ
/abc/       // new RegExp("abc") の代わり
```
👉 new String() みたいなのは「ラッパーオブジェクト」になって、
比較や型判定で地雷になりやすい

## 🔹 new を使っても使わなくてもいい（けど使わない派が多い）
```js
Array(3)    // new Array(3)
Object()    // new Object()
Function()  // new Function()
```
ただし Function() は セキュリティ＆可読性的にほぼ使わない

## ①プリミティブのラッパー系
| 型      | オブジェクト    |
| ------ | --------- |
| 文字列    | `String`  |
| 数値     | `Number`  |
| 真偽値    | `Boolean` |
| BigInt | `BigInt`  |
| Symbol | `Symbol`  |


```js
"hi".toUpperCase(); // Stringの機能
(123).toFixed(2);   // Numberの機能
```

## ②よく使う基本オブジェクト
| オブジェクト     | 説明                                                   |
| ---------- | ---------------------------------------------------- |
| `Object`   | 全オブジェクトの基本                                           |
| `Function` | 関数オブジェクト                                             |
| `Array`    | 配列                                                   |
| `RegExp`   | 正規表現                                                 |
| `Date`     | 日付                                                   |
| `Error` 系  | `Error`, `TypeError`, `RangeError`, `SyntaxError` など |


```js
new Date();
[1,2,3].map();
```

## ③エラー系
| 名前               |
| ---------------- |
| `Error`          |
| `TypeError`      |
| `ReferenceError` |

```js
throw new Error("失敗");
```

## ④数学・JSONなど
| オブジェクト        |
| ------------- |
| `Math`        |
| `JSON`        |
| `ArrayBuffer` |
| `DataView`    |


```js
Math.random();
JSON.parse("{}");
```

## ⑤ES6以降
| オブジェクト    |
| --------- |
| `Map`     |
| `Set`     |
| `WeakMap` |
| `WeakSet` |


## ⑥反射・その他
| オブジェクト        |
| ------------- |
| `Promise`     |
| `Proxy`       |
| `Reflect`     |
| `Intl` 系（国際化） |

```js
new Promise(...)
new Map()
Symbol.iterator
```

## 「標準」と「ビルトイン」の意味
| 言葉              | 意味                 |
| --------------- | ------------------ |
| 標準(Standard)    | ECMAScript仕様で決まってる |
| ビルトイン(Built-in) | JSに最初から組み込み済み      |

## ⚠️標準ビルトインではない例
### ①ブラウザ独自API
| 名前             |
| -------------- |
| `window`       |
| `document`     |
| `fetch`        |
| `localStorage` |
👉 Web API（ブラウザ機能）

## なぜプリミティブ型にもメソッドが使えるのか
＝内部で自動的に new されてラッパーオブジェクトに変換されているから

```js
// 下記は文字列なので、本来はプリミティブ型でオブジェクトではない
"hello".toUpperCase();

// 内部で起きていること
new String("hello").toUpperCase();

// ①Stringオブジェクトに包む（ラップする）
// ②メソッドを呼ぶ
// ③すぐ捨てる
// → これを オートボクシング（自動ラッピング） と呼ぶ
```

### 対象になるプリミティブ型
| プリミティブ  | ラッパー    |
| ------- | ------- |
| string  | String  |
| number  | Number  |
| boolean | Boolean |
| bigint  | BigInt  |
| symbol  | Symbol  |


## 標準ビルトインオブジェクトとメソッドは別物
```js
標準ビルトインオブジェクト（コンストラクタ）
        ↓
      Array
        ↓
   Array.prototype（メソッド置き場）
        ↓
 reduce(), map(), forEach()
```

| 用語            | 指すもの               | 例                 |
| ------------- | ------------------ | ----------------- |
| 標準ビルトインオブジェクト | JSに最初からあるオブジェクト    | `Array`, `String` |
| prototype     | インスタンスが共有するメソッド置き場 | `Array.prototype` |
| メソッド          | prototype内の関数      | `reduce`, `map`   |
