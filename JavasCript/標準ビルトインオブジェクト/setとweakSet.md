# Setã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨weakSetã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
**Set**ï¼šã€Œé‡è¤‡ã—ãªã„å€¤ã‚’é›†ã‚ã¦ãŠãç®±ã€
**WeakSet**ï¼šã€Œã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå°‚ç”¨ã§ã€ã“ã£ãã‚Šè¦šãˆã¦ãŠãç®±ã€

## Setã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
ï¼ã€ŒåŒã˜ã‚‚ã®ã¯1å€‹ã—ã‹å…¥ã‚‰ãªã„ã‚«ã‚´ã€
ï¼é‡è¤‡ç¦æ­¢

```js
const fruits = new Set();

fruits.add("ã‚Šã‚“ã”");
fruits.add("ã¿ã‹ã‚“");
fruits.add("ã‚Šã‚“ã”"); // 2å›å…¥ã‚Œã¦ã‚‚â€¦

console.log(fruits);
// â†’ {"ã‚Šã‚“ã”", "ã¿ã‹ã‚“"}
```
ğŸ‘‰ é‡è¤‡ã¯è‡ªå‹•ã§æ¶ˆãˆã‚‹ã®ãŒæœ€å¤§ã®ç‰¹å¾´

### Setã«å…¥ã‚Œã‚‰ã‚Œã‚‹ã‚‚ã®
ï¼ãªã‚“ã§ã‚‚OKï¼

```js
new Set([1, "a", true, { name: "å¤ªéƒ" }]);
```

### ã‚ˆãä½¿ã†æ“ä½œ
```js
const numbers = new Set([1, 2, 3]);

numbers.add(4);      // è¿½åŠ 
numbers.has(2);      // trueï¼ˆå…¥ã£ã¦ã‚‹ï¼Ÿï¼‰
numbers.delete(1);   // å‰Šé™¤
numbers.size;        // è¦ç´ ã®æ•°
```

### Setã¯ãƒ«ãƒ¼ãƒ—ã§ãã‚‹
```js
for (const n of numbers) {
  console.log(n);
}
```
ğŸ‘‰ ä¸­èº«ã‚’é †ç•ªã«å–ã‚Šå‡ºã›ã‚‹

### Setã‚’ä½¿ã†å…¸å‹çš„ãªå ´é¢
ï¼é…åˆ—ã®é‡è¤‡ã‚’æ¶ˆã—ãŸã„ã¨ã

```js
const array = [1, 2, 2, 3, 3];
const unique = [...new Set(array)];

console.log(unique);
// â†’ [1, 2, 3]
```

## WeakSetã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
ï¼ã€Œã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä¸€æ™‚çš„ã«è¦šãˆã¦ãŠããƒ¡ãƒ¢å¸³ã€
ï¼ä½¿ã‚ãªããªã£ãŸã‚‰ã‚¬ãƒ™ãƒ¼ã‚¸ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã§æ¶ˆã•ã‚Œã‚‹
ï¼ã‚­ãƒ¼ã«ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ or ã‚·ãƒ³ãƒœãƒ« ã—ã‹ã„ã‚Œã‚‰ã‚Œãªã„

### WeakSetã§ä½¿ãˆã‚‹ãƒ¡ã‚½ãƒƒãƒ‰
ï¼ä¸‹è¨˜ã®ï¼“ã¤ã®ã¿
```js
weakSet.add(obj);
weakSet.delete(obj);
weakSet.has(obj);
```

WeakSetã¯
- ä¸­èº«ã‚’å–ã‚Šå‡ºã›ãªã„
- ä¸€è¦§è¡¨ç¤ºã§ããªã„
- ã‚µã‚¤ã‚ºã‚‚ã‚ã‹ã‚‰ãªã„
ğŸ‘‰ ã ã‹ã‚‰ã€Œè¦šãˆã¦ã‚‹ã‹ã©ã†ã‹ã€ã‚’èãç®±ã¨ã„ã†è¨­è¨ˆ

### ç‰¹å¾´
â‘  ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã—ã‹å…¥ã‚Œã‚‰ã‚Œãªã„
```js
const ws = new WeakSet();

ws.add({ name: "å¤ªéƒ" }); // OK
ws.add(123);              // âŒ ã‚¨ãƒ©ãƒ¼
```

â‘¡ ä¸­èº«ã‚’å–ã‚Šå‡ºã›ãªã„ãƒ»æ•°ãˆã‚‰ã‚Œãªã„
```js
ws.size      // âŒ ãªã„
ws.forEach   // âŒ ã§ããªã„
```
ğŸ‘‰ ã€Œå…¥ã£ã¦ã‚‹ã‹ã©ã†ã‹ã€ã ã‘ç¢ºèªã§ãã‚‹
```js
ws.has(obj);
```

â‘¢ å‹æ‰‹ã«ãƒ¡ãƒ¢ãƒªã‹ã‚‰æ¶ˆãˆã‚‹ï¼ˆé‡è¦ï¼‰
```js
let user = { name: "èŠ±å­" };
ws.add(user);

user = null; // ã©ã“ã‹ã‚‰ã‚‚ä½¿ã‚ã‚Œãªããªã£ãŸ
```
ğŸ‘‰ ãã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯ã€è‡ªå‹•çš„ã«WeakSetã‹ã‚‰ã‚‚æ¶ˆãˆã‚‹

## Set ã¨ WeakSet ã®é•ã„ã¾ã¨ã‚
| é …ç›®      | Set   | WeakSet  |
| ------- | ----- | -------- |
| å…¥ã‚Œã‚‰ã‚Œã‚‹ã‚‚ã® | ãªã‚“ã§ã‚‚  | ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ã¿ |
| é‡è¤‡      | ã—ãªã„   | ã—ãªã„      |
| ãƒ«ãƒ¼ãƒ—     | ã§ãã‚‹   | âŒ        |
| size    | ã‚ã‚‹    | âŒ        |
| è‡ªå‹•å‰Šé™¤    | âŒ     | âœ…        |
| ä¸»ãªç”¨é€”    | ãƒ‡ãƒ¼ã‚¿ç®¡ç† | è£å´ã®ç®¡ç†    |

## Set / WeakSet / Map / WeakMap å¯¾å¿œè¡¨
| å‹       | add | delete | has | get |
| ------- | --- | ------ | --- | --- |
| Set     | âœ…   | âœ…      | âœ…   | âŒ   |
| WeakSet | âœ…   | âœ…      | âœ…   | âŒ   |
| Map     | set | delete | has | get |
| WeakMap | set | delete | has | get |


## MDN

[MDN](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Set)