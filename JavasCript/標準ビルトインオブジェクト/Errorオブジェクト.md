# Errorオブジェクト
＝「今ここで処理が失敗した」という情報を、機械にも人にも分かる形で伝えるためのもの

## Errorが伝えるものは3つ
### ① 失敗した（異常が起きた）
```js
throw new Error("失敗しました");
```
→ 「正常に処理できませんでした」

### ② 何が原因か（message）
```js
new Error("IDがありません");
```
→ message に理由を書く

### ③ どこで起きたか（stack）
```js
// エクマスクリプトには記載されてない
console.log(err.stack);
```
→ デバッグ用

## Errorを使う場面
### ① 続けても意味がないとき（止める）
```js
if (!user) {
  throw new Error("ユーザーが存在しません");
}
```
→ ここで止めるのが正しい

### ② 呼び出し側に対処させたいとき
```js
try {
  doSomething();
} catch (e) {
  // エラーとして処理できる
}
```
Errorで統一されてると扱いやすい

### ③ 想定外を検出したいとき（バグ）
```js
throw new Error("ここに来るのはおかしい");
```
→ 開発者用の安全装置

### ④ Promiseやasyncでは必須
```js
return Promise.reject(new Error("通信失敗"));
```
文字列より Errorが標準

## 「エラーを明示的に出すため」とは？
＝「失敗をちゃんと失敗として扱う」こと

### 悪い例（文字列）
```js
return "失敗";
```
- ただの文字
- stackもない
- 種類も分からない

### 良い例（Error）
```js
return new Error("失敗しました");
```
- Errorとして扱える
- catchできる
- 原因追跡できる

## throw new Error()とnew Error()の違い

| 書き方                       | 何が起きる？           | 処理は止まる？     |
| ------------------------- | ---------------- | ----------- |
| `new Error("通信失敗")`       | エラーオブジェクトを「作るだけ」 | ❌止まらない      |
| `throw new Error("通信失敗")` | エラーを「投げる」        | ✅止まる（例外になる） |


### new Error() はただの「データ」
```js
const err = new Error("通信失敗");
```
これはエラー情報を持ったオブジェクトを作っただけ
なので 何も起きない

### throw new Error() は「例外を発生させる命令」
```js
throw new Error("通信失敗");
```
JavaScriptの実行を中断して catch に飛ぶ
なので エラーとして処理される

## 「処理が止まらないとき」どこに表示されるのか？
＝どこにも表示されない

## まとめ
| 書き方                           | 意味          | 表示される？    |
| ----------------------------- | ----------- | --------- |
| `new Error()`                 | エラー情報を作るだけ  | ❌表示されない   |
| `console.log(new Error())`    | 自分で表示する     | ✅表示される    |
| `throw new Error()`           | 例外として発生させる  | ✅自動で表示される |
| `Promise.reject(new Error())` | 非同期エラーとして渡す | 状況次第      |
