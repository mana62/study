# レンダリングされるタイミング
＝画面描画は **「DOM + CSS 完成」かつ「JSが止まった瞬間」**にまとめて行われる

## レンダリングとは？
👉 画面に表示する処理

内部的には：
**DOM + CSS → レイアウト計算 → ペイント → 画面表示**

## レンダリングが行われる基本タイミング
### ① DOM と CSS の両方が揃った時
ブラウザは：
**DOM と CSS が揃わないと描画できない**

代表例：
**通常の <script> に遭遇した時**
**JS実行直前**
👉 一度レンダリングが入ることが多い

### ② DOM更新が発生した時
```js
document.body.innerHTML = "Hello";
```
👉 DOMが変わった → 画面更新が必要 → レンダリング
**⚠ ただし JS実行中には描画されない**
→ JSが全部終わってからまとめて描画

### JS実行中は再描画されない
```js
for(let i=0; i<1000000000; i++) {}
document.body.innerHTML = "Hello";
```
👉 **長いJS処理中は画面が止まる**
JSはメインスレッドを占有 → 描画できない
👉 パフォーマンス超重要ポイント

### 画像のダウンロード完了とレンダリング
DOM構築中に画像DL完了
👉 すぐ描画されない → 次のレンダリングタイミングでまとめて描画

### async スクリプトの意外な事実
```js
<script async src="x.js"></script>
```
👉 **DL完了 → 即実行ではない**
正確には：
**次のレンダリング可能タイミングまで待ってから実行**
⚠ だから 実行順が不定になる

## レンダリングが重要な理由
### ① 画面が固まる原因が理解できる
→ 重いJS = 描画ブロック

### ② パフォーマンス改善ができる
→ DOM操作をまとめる
→ 不要な再描画を減らす

### ③ バグの原因が追える
「表示されない」
「反映が遅れる」
「一瞬レイアウト崩れる」

→ レンダリングタイミングが原因

## 重要
① DOM + CSS 揃う → 描画できる
② JS実行中 → 描画できない
③ DOM変更 → JS終了後にまとめて描画

## まとめ
**ブラウザは「描画できるタイミング」でまとめて描画している**