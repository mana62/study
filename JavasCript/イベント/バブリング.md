# バブリング
＝バブリングは、**イベントが内側の要素から外側の要素へ向かって伝わっていく仕組み**のこと


```js
const input = document.querySelector('input');

// input 自身のイベント
input.addEventListener('input', e => console.log('input', e.target));

// 親要素（BODY）のイベント
document.body.addEventListener('input', e => console.log('body', e.target));

// ドキュメントのイベント
document.addEventListener('input', e => console.log('document', e.target));

// ウィンドウのイベント
window.addEventListener('input', e => console.log('window', e.target));
```
＝プロトタイプのように、親を見るからいろんなメソッドを使うことができる

## プロトタイプチェーンとイベントバブリングの比較

| 比較ポイント | プロトタイプチェーン | イベントバブリング |
|--------------|----------------------|----------------------|
| **目的**     | オブジェクトのプロパティやメソッドを探すため | イベントが親要素に伝わるため |
| **対象**     | JavaScriptのオブジェクト | DOMの要素（ノード） |
| **方向**     | オブジェクトの親（`__proto__`）をたどる | イベントが内側→外側へ伝わる |
| **使い方**   | `obj.toString()` など、親のメソッドを使える | `click` イベントが親要素にも届く |


## バブリングの流れ
```js
inputイベント発生
      │
      ▼
   input要素のリスナー  ← e.target は input
      │
      ▼
   BODYのリスナー
      │
      ▼
   Documentのリスナー
      │
      ▼
   Windowのリスナー
```
- 呼ばれる順番が下から上（ターゲット → 親 → 親 → … → Window）
- 各リスナーは 同じイベントオブジェクト（e）を受け取る
- `e.target` は 常にイベント発生元（この例なら input）
- 親に付けたリスナーでも e.target を見れば「どこで発生したか」がわかる

## ポイント
- 「順番に辿る」という部分がプロトタイプチェーンと似ている
- バブリングを使うと、まとめて親要素にリスナーを置くだけで子のイベントを処理できる
  - 例：大量の input を個別に登録せず、親の form だけにイベントを置く
- 逆に バブリングしないイベント もある（focus / blur など）


## バブリングしないイベント
| イベント           | 説明        |
| -------------- | --------- |
| **focus**      | フォーカスされた  |
| **blur**       | フォーカスが外れた |
| **mouseenter** | マウスが入った   |
| **mouseleave** | マウスが出た    |
| **load**       | 読み込み完了    |
| **unload**     | ページ離脱     |


## なぜバブリングしないイベントがあるのか
＝意図しない誤動作を防ぐため

## バブリングするイベント

| イベント      | バブリング | 意味・用途 |
|---------------|------------|------------|
| `click`       | ✅         | 要素がクリックされたとき |
| `dblclick`    | ✅         | 要素がダブルクリックされたとき |
| `input`       | ✅         | 入力欄の内容が変わったとき（リアルタイム） |
| `change`      | ✅         | 入力欄やセレクトボックスの値が確定して変わったとき |
| `submit`      | ✅         | フォームが送信されたとき |
| `keydown`     | ✅         | キーが押されたとき（押しっぱなし含む） |
| `keyup`       | ✅         | キーが離されたとき |
| `keypress`    | ✅         | 文字が入力されたとき（非推奨） |
| `mousedown`   | ✅         | マウスのボタンが押されたとき |
| `mouseup`     | ✅         | マウスのボタンが離されたとき |
| `mousemove`   | ✅         | マウスが動いたとき |
| `mouseover`   | ✅         | マウスが要素の上に乗ったとき |
| `mouseout`    | ✅         | マウスが要素から離れたとき |


## まとめ
- バブリング = **イベントが発生した要素から親要素を順番に辿って、登録されているリスナーを全部呼ぶ仕組み**
- **e.target を使えば「発生元」がわかる**