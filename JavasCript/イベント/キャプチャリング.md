# キャプチャリング
＝バブリングの逆

**JavaScriptのイベントは、3つの順番で処理される**
```bash
① キャプチャフェーズ
② ターゲットフェーズ
③ バブリングフェーズ
```
＝普通に `addEventListener` すると **③バブリングフェーズ で動く**

### HTML構造が下記のようになっている場合
```html
window
 └ document
    └ body
       └ div
          └ input  ← ここをクリック
```
→ この input でイベントが起きたとき、イベントは3段階で伝わる

## フェーズ① キャプチャフェーズ（上 → 下）
```bash
window → document → body → div → input
```
上から下へ降りてくる
👉 これが キャプチャリング（捕まえに行く）

## フェーズ② ターゲットフェーズ（本体）
```bash
input
```
実際にイベントが起きた要素

## フェーズ③ バブリングフェーズ（下 → 上）
```bash
input → div → body → document → window
```
下から上へ泡のように 올라る
👉 これが バブリング

## よく使っているのは
👉 99%はバブリングフェーズ

## キャプチャフェーズで動かしたい場合
＝第3引数に `capture: true` を指定する
```js
element.addEventListener("click", handler, { capture: true });
```

または省略して

```js
element.addEventListener("click", handler, true);
```
👉 これでキャプチャフェーズで実行される

## まとめ
| フェーズ  | 何をする  | 方向    |
| ----- | ----- | ----- |
| キャプチャ | 先回り処理 | 上 → 下 |
| ターゲット | 本体    | その場   |
| バブリング | 後処理   | 下 → 上 |
